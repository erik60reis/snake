<!doctypehtml><html lang=en><meta charset=UTF-8><meta content="width=device-width,initial-scale=1"name=viewport><title>Snake Game</title><style>body{display:flex;justify-content:center;align-items:center;height:100vh;margin:0;font-family:Arial,sans-serif}#gameContainer{position:relative}#gameCanvas{border:1px solid #000}#score{position:absolute;top:10px;left:10px;font-size:18px;color:#000}#leaderboard{position:absolute;top:10px;right:10px;font-size:16px;color:#000}table{border-collapse:collapse;width:250px}td,th{border:1px solid #000;padding:8px;text-align:left}</style><div id=gameContainer><canvas height=400 id=gameCanvas width=400></canvas><div id=score>Score: 0 High Score: 0</div></div><div><div id=leaderboard><h3>Leaderboard</h3><table id=leaderboardTable><tr><th>Rank<th>Name<th>Score</table><br><br><div id=submitForm><input id=playerName placeholder="Your Name"> <button onclick=submitHighScore()>Submit High Score</button></div></div></div><script>async function fetchLeaderboard(){try{const e=await fetch("/leaderboard"),t=await e.json(),a=document.getElementById("leaderboardTable");a.innerHTML="<tr><th>Rank</th><th>Name</th><th>Score</th></tr>",t.forEach(((e,t)=>{const o=`<tr><td>${t+1}</td><td>${e.name}</td><td>${e.score}</td></tr>`;a.innerHTML+=o}))}catch(e){}}async function submitHighScore(){const e=document.getElementById("playerName").value,t=localStorage.getItem("snakeHighScore")||0;if(e&&t>0)try{if(!(await fetch("/leaderboard",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e,score:t})})).ok)throw new Error("Failed to submit high score");alert("High score submitted successfully!"),fetchLeaderboard()}catch(e){alert("Failed to submit high score. Please try again.")}else alert("Please enter your name and achieve a score greater than 0 to submit.")}document.addEventListener("DOMContentLoaded",(()=>{const e=document.getElementById("gameCanvas"),t=e.getContext("2d"),a=20,o={x:160,y:160,dx:a,dy:0,cells:[],maxCells:4};let n={x:320,y:320},r=0,d=localStorage.getItem("snakeHighScore")||0;const c=document.getElementById("score");function l(e,t){return Math.floor(Math.random()*(t-e))+e}function y(){n.x=l(0,e.width/a)*a,n.y=l(0,e.height/a)*a,o.cells.forEach((e=>{n.x===e.x&&n.y===e.y&&y()}))}function i(){r>d&&(d=r,localStorage.setItem("snakeHighScore",d)),r=0,o.x=160,o.y=160,o.cells=[],o.maxCells=4,o.dx=a,o.dy=0,y(),s()}function s(){c.textContent=`Score: ${r} High Score: ${d}`}function h(){t.clearRect(0,0,e.width,e.height),o.x+=o.dx,o.y+=o.dy,(o.x<0||o.x>=e.width||o.y<0||o.y>=e.height)&&i(),o.cells.unshift({x:o.x,y:o.y}),o.cells.length>o.maxCells&&o.cells.pop(),o.cells.forEach(((e,n)=>{t.fillStyle=0===n?"green":"lightgreen",t.fillRect(e.x,e.y,a-1,a-1),e.x===o.x&&e.y===o.y&&n>0&&i()})),t.fillStyle="red",t.fillRect(n.x,n.y,a-1,a-1),o.x===n.x&&o.y===n.y&&(o.maxCells++,r++,y(),s())}document.addEventListener("keydown",(function(e){"ArrowLeft"===e.key||"a"===e.key?0===o.dx&&(o.dx=-a,o.dy=0):"ArrowRight"===e.key||"d"===e.key?0===o.dx&&(o.dx=a,o.dy=0):"ArrowUp"===e.key||"w"===e.key?0===o.dy&&(o.dy=-a,o.dx=0):"ArrowDown"!==e.key&&"s"!==e.key||0===o.dy&&(o.dy=a,o.dx=0)})),s(),setInterval((()=>{h()}),50)})),fetchLeaderboard();</script>